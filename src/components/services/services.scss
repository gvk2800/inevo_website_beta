/* Variables (adjust as needed) */
$primary: #00b3b3;
$bg: #f7fcfb;
$card-bg: #ffffff;
$text: #222;
$muted: #6b6b6b;
$shadow: 0 6px 18px rgba(15, 15, 15, 0.08);
$dark-text: #1a1a1a;

.services-flip {
  padding: 2rem;
  background: $bg;
  display: flex;
  justify-content: center;

  &__grid {
    width: 100%;
    max-width: 1200px;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1.5rem;
    align-items: start;
  }

  .flip-card {
    perspective: 1200px;
    cursor: pointer;
    outline: none;

    &:focus {
      box-shadow: 0 0 0 4px rgba($primary, 0.12);
      border-radius: 14px;
    }

    &__inner {
      position: relative;
      width: 100%;
      min-height: 260px; /* keep consistent height */
      transition: transform 0.65s;
      transform-style: preserve-3d;
      border-radius: 14px;
      
    }

    &.is-flipped .flip-card__inner {
      transform: rotateY(180deg);
    }

    /* Face */
    &__face {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 14px;
      box-shadow: $shadow;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.6rem;
      background: $card-bg;
    }

    &__face--front {
      .card-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;

        .card-icon {
            width: 96px;                // consistent outer circle size
            height: 96px;
            margin-bottom: 0.8rem;
            border: 3px solid #D7EEEE;
            border-radius: 50%;
            background: #ffffff;
            display: flex;              // center icon perfectly
            align-items: center;
            justify-content: center;

            img {
                width: 58px;           // fixed inner icon box so all look same
                height: 58px;
                object-fit: contain;
                display: block;
            }
        }

        .card-title {
            font-weight: 700;           // font-bold
            color: $dark-text;          // text-dark-text (use your variable or hex like #1a1a1a)
            max-width: 56rem;           // max-w-4xl (56rem = 896px)
            margin-left: auto;          // mx-auto
            margin-right: auto;
            text-align: center;
        }

        .card-desc {
          font-size: 0.92rem;
          color: $muted;
          max-width: 220px;
        }
      }
    }

    &__face--back {
      transform: rotateY(180deg);
      background: linear-gradient(180deg, #ffffff, #fbfffe);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.8rem; /* extra breathing room so heading doesn't touch edges */

      .card-back-content {
        text-align: center; /* center heading container */
        width: 100%;
        padding-left: 0.25rem;  /* tiny inset so long headings don't hug border */
        padding-right: 0.25rem;

        .back-heading {
          font-size: 1.05rem;
          margin: 0 auto 0.6rem auto; /* center the heading itself */
          color: $text;
          text-align: center;
          position: relative;
          display: inline-block; /* shrink to text width */
          

          /* Centered underline spanning heading width */
          &::after {
            content: '';
            display: block;
            width: 100%;
            height: 3px;
            background: #00B8B5;
            border-radius: 2px;
            margin: 8px auto 0 auto; /* underline follows heading width */
          }
        }

        .back-list {
          text-align: left; /* keep list text left-aligned */
          display: inline-block; /* center the list block while keeping its text left */
          margin-left: 1rem;
          list-style: disc;
          color: $text;
          font-size: 0.95rem;
          line-height: 1.4;

          li {
            margin-bottom: 0.6rem;
            span {                          // apply truncation to span
                display: -webkit-box;         
                -webkit-line-clamp: 3;        // max 3 lines
                -webkit-box-orient: vertical;
                overflow: hidden;
                text-overflow: ellipsis;
            }
          }
        }
      }
    }
  }
}

/* Responsiveness */
@media (max-width: 992px) {
  .services-flip__grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (max-width: 620px) {
  .services-flip__grid {
    grid-template-columns: 1fr;
    gap: 1rem;
  }

  .flip-card {
    &__inner {
      min-height: 350px; /* increased height for mobile */
    }

    &__face {
      padding: 1.2rem;
    }

    &__face--front .card-content .card-desc {
      max-width: 100%;
    }

    &__face--back {
      padding: 1rem;
      overflow-y: auto; /* allow scrolling if content is too long */
      
      .card-back-content {
        
        .back-heading {
          font-size: 1rem;
          margin-bottom: 0.8rem;
          line-height: 1.3;
        }

        .back-list {
          font-size: 0.9rem;
          line-height: 1.5;
          margin-left: 0.8rem;

          li {
            margin-bottom: 0.8rem;
            
            span {
              display: block;
              -webkit-line-clamp: 4; /* increased from 3 to 4 lines */
              -webkit-box-orient: vertical;
              overflow: hidden;
              text-overflow: ellipsis;
              word-wrap: break-word;
              word-break: break-word;
            }
          }
        }
      }
    }
  }
}

/* Extra small mobile devices */
@media (max-width: 480px) {
  .services-flip {
    padding: 1rem;
  }

  .flip-card {
    &__inner {
      min-height: 380px; /* even taller for very small screens */
    }

    &__face {
      padding: 1rem;
    }

    &__face--back {
      .card-back-content {
        .back-heading {
          font-size: 0.95rem;
          margin-bottom: 0.6rem;
        }

        .back-list {
          font-size: 0.85rem;
          line-height: 1.4;
          margin-left: 0.6rem;

          li {
            margin-bottom: 0.6rem;
            
            span {
              -webkit-line-clamp: 3; /* back to 3 lines for very small screens */
            }
          }
        }
      }
    }
  }
}


